<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1362.6999999999998 2431" width="1362.6999999999998" height="2431" style="--bg:#FFFFFF;--fg:#27272A;background:var(--bg)">
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&amp;display=swap');
  text { font-family: 'Inter', system-ui, sans-serif; }
  svg {
    /* Derived from --bg and --fg (overridable via --line, --accent, etc.) */
    --_text:          var(--fg);
    --_text-sec:      var(--muted, color-mix(in srgb, var(--fg) 60%, var(--bg)));
    --_text-muted:    var(--muted, color-mix(in srgb, var(--fg) 40%, var(--bg)));
    --_text-faint:    color-mix(in srgb, var(--fg) 25%, var(--bg));
    --_line:          var(--line, color-mix(in srgb, var(--fg) 30%, var(--bg)));
    --_arrow:         var(--accent, color-mix(in srgb, var(--fg) 50%, var(--bg)));
    --_node-fill:     var(--surface, color-mix(in srgb, var(--fg) 3%, var(--bg)));
    --_node-stroke:   var(--border, color-mix(in srgb, var(--fg) 20%, var(--bg)));
    --_group-fill:    var(--bg);
    --_group-hdr:     color-mix(in srgb, var(--fg) 5%, var(--bg));
    --_inner-stroke:  color-mix(in srgb, var(--fg) 12%, var(--bg));
    --_key-badge:     color-mix(in srgb, var(--fg) 10%, var(--bg));
  }
</style>
<defs>
  <marker id="arrowhead" markerWidth="8" markerHeight="4.8" refX="8" refY="2.4" orient="auto">
    <polygon points="0 0, 8 2.4, 0 4.8" fill="var(--_arrow)" />
  </marker>
  <marker id="arrowhead-start" markerWidth="8" markerHeight="4.8" refX="0" refY="2.4" orient="auto-start-reverse">
    <polygon points="8 0, 0 2.4, 8 4.8" fill="var(--_arrow)" />
  </marker>
</defs>
<rect x="40" y="40" width="254.75" height="591" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="40" y="40" width="254.75" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="52" y="54" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;Stage 1: Demographics&quot;</text>
<rect x="343.3499999999999" y="508" width="389.4000000000001" height="446" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="343.3499999999999" y="508" width="389.4000000000001" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="355.3499999999999" y="522" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;Stage 2: Interview + Extraction&quot;</text>
<rect x="752.75" y="675" width="569.9499999999999" height="1716" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="752.75" y="675" width="569.9499999999999" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="764.75" y="689" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;Stage 3: Diagnosis + RAG&quot;</text>
<rect x="40" y="831" width="283.3499999999999" height="602" rx="0" ry="0" fill="var(--_group-fill)" stroke="var(--_node-stroke)" stroke-width="1" />
<rect x="40" y="831" width="283.3499999999999" height="28" rx="0" ry="0" fill="var(--_group-hdr)" stroke="var(--_node-stroke)" stroke-width="1" />
<text x="52" y="845" dy="0.35em" font-size="12" font-weight="600" fill="var(--_text-sec)">&quot;One-time: Guideline Ingestion&quot;</text>
<polyline points="167.375,132 167.375,252" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="167.375,288 167.375,408" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="167.375,444 167.375,564" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="434.9749999999999,731 434.9749999999999,711 399.1624999999999,711 399.1624999999999,587.5 487.4249999999999,587.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="578.4999999999999,605.5 578.4999999999999,631 517.3249999999999,631 517.3249999999999,749 504.5999999999999,749" fill="none" stroke="var(--_line)" stroke-width="0.75" stroke-dasharray="4 4" marker-end="url(#arrowhead)" />
<polyline points="578.4999999999999,605.5 578.4999999999999,631 619.675,631 619.675,731" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="619.675,767 619.675,887" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="1032.8625,767 1032.8625,887" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="1032.8625,934 1032.8625,954 1197.8374999999999,954 1197.8374999999999,1054" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="1197.8374999999999,1090 1197.8374999999999,1110 1207.8374999999999,1110 1207.8374999999999,1210" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="1197.8374999999999,1090 1197.8374999999999,1110 1084.0375,1110 1084.0375,1228 1092.7625,1228" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="1207.8374999999999,1246 1207.8374999999999,1371.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="980.2375,1246 980.2375,1371.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="1207.8374999999999,1407.5 1207.8374999999999,1556.5 1135.725,1556.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="980.2375,1407.5 980.2375,1556.5 939.275,1556.5" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="1037.5,1580 1037.5,1700" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="1037.5,1736 1037.5,1856" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="1037.5,1892 1037.5,2030 976.9,2030" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="900.125,2048 900.125,2168" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="900.125,2204 900.125,2324" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="181.67499999999995,928.5 181.67499999999995,1054" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="181.67499999999995,1090 181.67499999999995,1210" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="181.67499999999995,1246 181.67499999999995,1366" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="167.375,611 167.375,651 429.88749999999993,651 429.88749999999993,749 365.3499999999999,749" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="578.4999999999999,605.5 578.4999999999999,631 676.2124999999999,631 676.2124999999999,749 938.2125,749" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="619.675,934 619.675,954 666.2124999999999,954 666.2124999999999,974 922.9749999999999,974 922.9749999999999,1228 867.7125,1228" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="619.675,934 619.675,954 501.51249999999993,954 501.51249999999993,974 842.8625,974 842.8625,2030 823.35,2030" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="1032.8625,934 1032.8625,954 821.0749999999999,954 821.0749999999999,2030 823.35,2030" fill="none" stroke="var(--_line)" stroke-width="0.75" marker-end="url(#arrowhead)" />
<polyline points="181.67499999999995,1413 181.67499999999995,1453 912.9749999999999,1453 912.9749999999999,1556.5 939.275,1556.5" fill="none" stroke="var(--_line)" stroke-width="0.75" stroke-dasharray="4 4" marker-end="url(#arrowhead)" />
<rect x="97.75" y="96" width="139.25" height="36" rx="18" ry="18" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="112.05" y="252" width="110.65" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="61.999999999999986" y="408" width="210.75000000000003" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="104.9" y="571" width="124.95" height="33" fill="var(--_node-fill)" stroke="none" />
<line x1="104.9" y1="571" x2="104.9" y2="604" stroke="var(--_node-stroke)" stroke-width="0.75" />
<line x1="229.85000000000002" y1="571" x2="229.85000000000002" y2="604" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="167.375" cy="604" rx="62.475" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="167.375" cy="571" rx="62.475" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="365.3499999999999" y="731" width="139.25" height="36" rx="18" ry="18" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="487.4249999999999" y="569.5" width="182.15" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="528.5999999999999" y="731" width="182.15" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="542.9" y="894" width="153.55" height="33" fill="var(--_node-fill)" stroke="none" />
<line x1="542.9" y1="894" x2="542.9" y2="927" stroke="var(--_node-stroke)" stroke-width="0.75" />
<line x1="696.45" y1="894" x2="696.45" y2="927" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="619.675" cy="927" rx="76.775" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="619.675" cy="894" rx="76.775" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="938.2125" y="731" width="189.3" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="938.2125" y="894" width="189.3" height="33" fill="var(--_node-fill)" stroke="none" />
<line x1="938.2125" y1="894" x2="938.2125" y2="927" stroke="var(--_node-stroke)" stroke-width="0.75" />
<line x1="1127.5125" y1="894" x2="1127.5125" y2="927" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="1032.8625" cy="927" rx="94.65" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="1032.8625" cy="894" rx="94.65" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="1131.7875" y="1054" width="132.10000000000002" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="1116.7624999999998" y="1210" width="182.15" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="867.7125" y="1210" width="225.05" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="1148.9374999999998" y="1371.5" width="117.80000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="921.3375" y="1371.5" width="117.80000000000001" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="939.275" y="1540" width="196.45000000000002" height="33" fill="var(--_node-fill)" stroke="none" />
<line x1="939.275" y1="1540" x2="939.275" y2="1573" stroke="var(--_node-stroke)" stroke-width="0.75" />
<line x1="1135.725" y1="1540" x2="1135.725" y2="1573" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="1037.5" cy="1573" rx="98.22500000000001" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="1037.5" cy="1540" rx="98.22500000000001" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="942.85" y="1700" width="189.3" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="942.85" y="1856" width="189.3" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="823.35" y="2012" width="153.55" height="36" rx="6" ry="6" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="816.2" y="2168" width="167.85000000000002" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="837.65" y="2331" width="124.95" height="33" fill="var(--_node-fill)" stroke="none" />
<line x1="837.65" y1="2331" x2="837.65" y2="2364" stroke="var(--_node-stroke)" stroke-width="0.75" />
<line x1="962.6" y1="2331" x2="962.6" y2="2364" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="900.125" cy="2364" rx="62.475" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="900.125" cy="2331" rx="62.475" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="104.89999999999995" y="892.5" width="153.55" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="61.99999999999994" y="1054" width="239.35000000000002" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="61.99999999999994" y="1210" width="239.35000000000002" height="36" rx="0" ry="0" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<rect x="108.47499999999995" y="1373" width="146.4" height="33" fill="var(--_node-fill)" stroke="none" />
<line x1="108.47499999999995" y1="1373" x2="108.47499999999995" y2="1406" stroke="var(--_node-stroke)" stroke-width="0.75" />
<line x1="254.87499999999994" y1="1373" x2="254.87499999999994" y2="1406" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="181.67499999999995" cy="1406" rx="73.2" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<ellipse cx="181.67499999999995" cy="1373" rx="73.2" ry="7" fill="var(--_node-fill)" stroke="var(--_node-stroke)" stroke-width="0.75" />
<text x="167.375" y="114" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">Patient Message</text>
<text x="167.375" y="270" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">Claude Opus</text>
<text x="167.375" y="426" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">collect_demographics tool</text>
<text x="167.375" y="587.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">user_profiles</text>
<text x="434.9749999999999" y="749" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">Patient Message</text>
<text x="578.4999999999999" y="587.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">Claude Opus Interview</text>
<text x="619.675" y="749" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">Claude Haiku - silent</text>
<text x="619.675" y="910.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">clinical_findings</text>
<text x="1032.8625" y="749" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">generate_differentials</text>
<text x="1032.8625" y="910.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">differential_diagnoses</text>
<text x="1197.8374999999999" y="1072" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">Each Diagnosis</text>
<text x="1207.8374999999999" y="1228" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">Query: Condition Only</text>
<text x="980.2375" y="1228" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">Query: Condition + Findings</text>
<text x="1207.8374999999999" y="1389.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">OpenAI Embed</text>
<text x="980.2375" y="1389.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">OpenAI Embed</text>
<text x="1037.5" y="1556.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">pgVector 83k WHO chunks</text>
<text x="1037.5" y="1718" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">Merge + Dedup + Rerank</text>
<text x="1037.5" y="1874" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">Top 5 Guideline Chunks</text>
<text x="900.125" y="2030" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">Claude Sonnet 4.5</text>
<text x="900.125" y="2186" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">Assessment and Plan</text>
<text x="900.125" y="2347.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">conversations</text>
<text x="181.67499999999995" y="910.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">WHO XML from NCBI</text>
<text x="181.67499999999995" y="1072" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">Hierarchical section chunking</text>
<text x="181.67499999999995" y="1228" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">OpenAI text-embedding-3-small</text>
<text x="181.67499999999995" y="1389.5" text-anchor="middle" dy="0.35em" font-size="13" font-weight="500" fill="var(--_text)">guideline_chunks</text>
</svg>